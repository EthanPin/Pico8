pico-8 cartridge // http://www.pico-8.com
version 38
__lua__

function _init()
	make_player()
end

function _update()
	move_player()
end

function _draw()
	 cls()

 	--draw the map from tile 0,0
 	--at screen coordinate 0,0 and
 	--draw 16 tiles wide and tall
 	map(0,0,0,0,32,32)

 	--draw the player's sprite at
 	--p.x,p.y
 	camera(p.x - 56, p.y - 80)
	 spr(p.sprite,p.x,p.y,2,2,not p.dir,false)
end

function make_player()
	 p={}  --create empty table

	 p.x=24 --player's exact pixel
 	p.y=96 --position on screen
 	p.clm = p.x/8	 --collumn
 	p.row = p.y/8  --row

 	p.gnd	 = true 	--on ground?
 	p.dir	 = true		--true = >>>
 	p.runfrm  = 0		--run anim sprites
	 p.dash = false	--am i dashin
	 p.jump = false	--am i jumpin
	 p.rise = 20				--jmp distance

	 p.sprite=032 --player sprite
end

function walk()
  --use  <= instead of ==
		if (p.runfrm >= 9 and p.runfrm < 12) then
		  p.sprite = 044
		  p.runfrm = 0
		elseif (p.runfrm >= 6 and p.runfrm < 9) then
		  p.sprite = 046
		  p.runfrm += 1
		elseif (p.runfrm >= 3 and p.runfrm < 6) then
		  p.sprite = 044
		  p.runfrm += 1
		else
    p.sprite = 042
    p.runfrm += 1
  end
end

function move_player()
	 --depending on which buttons
	 --are pressed
	 --left
 	if (btn(‚¨ÖÔ∏è)) then
		--get the tile and check the flag to the left
		  if --(fget(mget(((p.x-1)/8),((p.y)/8))) != 001) and
		    (fget(mget(((p.x-1)/8),((p.y-1)/8)+1)) != 001) and
		  		(fget(mget(((p.x-1)/8),((p.y-1)/8)+2)) != 001) then
						p.x-=1
						walk()
				else		
						--p.sprite = 032
		  end
		  p.clm = p.x/8
		  p.dir = false
	 end --left
	 --right
	 if (btn(‚û°Ô∏è)) then
		  --get the tile and check the flag 2 tiles 2 the right
		  if --(fget(mget((p.x/8)+2,((p.y)/8))) != 001) and
		  		(fget(mget((p.x/8)+2,((p.y-1)/8)+1)) != 001) and
		  		(fget(mget((p.x/8)+2,((p.y-1)/8)+2)) != 001)then
				  p.x+=1
				  walk()
				else
				  --p.sprite = 032
		  end
		  p.clm = p.x/8
		  p.dir = true
	 end --right
	 --dash	
	 if (btnp(üÖæÔ∏è) and btn(‚¨áÔ∏è)) then --not jump
		  if (p.dir) then --check direction
			   p.x+=6
			   p.dash = true
		  else
			   p.x-=6
			   p.dash = true
		  end
	 end --dash
	 --gravity
	 --if in the air
	 if (fget(mget(((p.x-1)/8)+2,((p.y)/8)+2)) != 001) and
	 		(fget(mget(((p.x-1)/8)+1,((p.y)/8)+2)) != 001) and
	 		(fget(mget(((p.x)/8),((p.y)/8)+2)) != 001) then
				if (btn(üÖæÔ∏è) and not btn(‚¨áÔ∏è) and p.rise > 0) then
  				p.rise -= 1
  				p.y -= 1
  				p.sprite = 038
  		else 
  				p.y += 1
  				p.rise = 0
  				p.sprite = 040
  		end
		--if on ground		
		else 
				if (not btn(‚û°Ô∏è) and not btn(‚¨ÖÔ∏è)) then
						p.sprite = 032
				end
				if (btnp(üÖæÔ∏è) and not btn(‚¨áÔ∏è)) then
    		p.rise = 20
    		p.y -= 2
    		p.sprite = 038--jump frame
    		p.jump = true
  		end
  end
end
__gfx__
0000000064404564bbbbbbbb00000000000000bb55555555c7c77cc71cccc1cc00000000000000000000000000000000eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee
0000000004046445333bb333000000000000bb3366766666cccccccccc1ccc1c00000000000000000000000000000000eeeeeee333eeeeeeeeeeeee333eeeeee
0070070044544044633333370000000000bb333f66666767ccccccccccc1c1cc00000000000000000000000000000000eee33337773eeeeeeee33337773eeeee
00077000646464545f3333f600000000bb333f7f67666666cccc7ccccccccccc00000000000000000000000000000000ee3777377703eeeeee3777377073eeee
0007700046540540f6ff6f5f000000bb3337f5f666676666cc7ccccccccccccc00000000000000000000000000000000e37770377773eeeee37770377773eeee
0070070050446454f65f76f60000bb333f5f6ff567666676cccccccccc1ccccc00000000000000000000000000000000ee37777377733eeeee37777377733eee
00000000446054647ffff5f500bb3336f76fff6f76676666cccccc7cccc1cc1c00000000000000000000000000000000ee33777333333eeeee33777333333eee
00000000445446405f7f6f7fbb33356f5ff57ff755555555cccccccccccc1ccc00000000000000000000000000000000eee33333333333eeeee33333333333ee
000000000000000000000000bb00000000000000000000002e3333ee0033330000333300003333000033330000333300eeee333333333333eeee333333333333
00000000000000000000000033bb00000000000000000000e703370e0703370007033700070337000703370007033700eee33333bbb33333eee33333b8b33333
000000000000000000000000f333bb0000000000000000003703370e3703370037733770377337703703370037033700eeee33338333333eeeee3333b8b3333e
00000000000000000000000076f333bb0000000000000000333333333333333333333334333333343333333333333333eeee3333333333eeeeee3333bb3333ee
000000000000000000000000f5f5f333bb00000000000000333bb333333bb333333bb343333bb343333bb333333bb333eeeee333333333eeeeeee333333333ee
0000000000000000000000006ff67f5333bb000000000000e33834440338344403383440033834400338344303383443eeeee44333344eeeeeeeee3333333eee
000000000000000000000000f75ff67ff333bb0000000000ee33434e0033434000333400003334000033334400333344eeee4444ee4444eeeeeeee33eee33eee
000000000000000000000000f6f7fff576f333bb00000000ee3ee3ee0330033000300300033003300030030403300334eeee4444ee4444eeeeeeee33eee33eee
2eeeeee666eeeeee00000000000000000000000000000000eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee
eee6666e566eeeee00000000000000000000000000000000eeeee66eeeeeeeeeeeeee66eeeeeeeeeeeeee66eeeeeeeeeeeeee6eeeeeeeeeeeeeeeee55eeeeeee
eeee556e5556eeee00000000000000000000000000000000eeeeee655eeeeeeeeeeeee655eeeeeeeeeeeee655eeeeeeeeeeee66eeeeeeeeeeeeee66e555eeeee
eeeee556ee56eeee0000000000000000000000000000000066555eee555eeeee66555eee555eeeee66555eee555eeeeeeeeeee655eeeeeeeee555eee5555eeee
eeeeee55555eeeee00000000000000000000000000000000eeeee5ee5715eeeeeeeee5ee5775eeeeeeeee5ee5555eeee66555eee555eeeeeee6ee5ee5715eeee
eeeee5555715eeee00000000000000000000000000000000eeeeee555775eeeeeeeeee555715eeeeeeeeee555715eeeeeeeee5e55555eeeeee6eee5555555eee
eeeee5571775eeee00000000000000000000000000000000eeeeeee555555eeeeeeeeee555555eeeeeeeeee555555eeeeeeeee5557155eeeeeeeeee555555eee
eeeeee57755eeeee00000000000000000000000000000000eeeeeee555557eeeeeeeeee555557eeeeeeeeee555557eeeeeeeeee555557eeeeeeeeee555557eee
eeeeee55557eee5e00000000000000000000000000000000eeeee555555e7eeeeeeee555555e7eeeeeeee555555e7eeeeeeee555555e7eeeeeeee555555e7eee
eeeccccccaaaaa9900000000000000000000000000000000eeeee5ccc55eeeeeeeeee5ccc55eeeeeeeeee5ccc55eeeeeeeeee5ccc55eeeeeeeeee5ccc55eeeee
eeeccc99999955ee00000000000000000000000000000000eeeee5ccccaaa99eeeeee5ccccaaa99eeeeee5ccccaaa99eeeeee5ccccaaa99eeeeee5ccccaaa99e
eeee555545555eee00000000000000000000000000000000eeeee5aaaaaeeeeeeeeee5aaaaaeeeeeeeeee5aaaaaeeeeeeeeee5aaaaaeeeeeeeee75aaaaaeeeee
e6e5555555555eee00000000000000000000000000000000eee7e5556aeeeeeeeee7e5556aeeeeeeeee7e5556aeeeeeeeeeee5556aeeeeeeeee775556aeeeeee
e665555555eeeeee00000000000000000000000000000000eee7555555eeeeeeeee7555555eeeeeeeee7555555eeeeeeee75e55555eeeeeeeee7555555eeeeee
e6555555555eeeee00000000000000000000000000000000eeee755ee556eeeeeeee755ee556eeeeeeee75555eeeeeeeeee755555eeeeeeeeeee7e5555eeeeee
eeee5555555555ee00000000000000000000000000000000eeeee556eeeeeeeeeeeee556eeeeeeeeeeeee555556eeeeeeeee755556eeeeeeeeeeeeee56eeeeee
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
bb0b000bb00330000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0b0b00bb0000e0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
eb3bb00b000030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
b330b33330bbb0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0b003300b3b0003b0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00b33e3003b000300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000003030b000bb00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000b00b0b00b000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000b0bb0bbeb000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000bbb0bb000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000004400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000004400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000004400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000044440000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000444444000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__gff__
0001010000010202000000000000000000000000000100000000000000000000000000000000000000000000000000000000000101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
0100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0100000000000000000000000000040502021400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0213140000000405131400000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0201010100000000000001030214000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0201010101010101010101010101010101000000000000000101000000000001010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0200000000000000000000000000000100000000001414000000010100000000010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0200000000000000000000000000000000000000000014141415000000000000000000000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0200000000000000000000000000000000000000000000000000000000000000000000000101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0102010205020602020000000000000000000000000000000000000000000000000000010100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0101010101010101010101010101010000000202020000010100000000000000000001010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000010101010101010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0100000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0101010101000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000001010101010101010101010101010000000001010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000010100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000101010101010101010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000001010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0101010100000000010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000001000000000000000000000101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000010001010101010101010100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
